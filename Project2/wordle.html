<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="icon" type="image/png" href="favicon.png">
  <title>Wordle</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #fafafa;
      text-align: center;
      margin: 40px;
    }

    h1 {
      font-size: 2em;
      margin-bottom: 20px;
    }

    #board {
      display: grid;
      grid-template-rows: repeat(6, 1fr);
      gap: 5px;
      width: 290px; /* 50*5 + 10*4 */
      margin: 0 auto 20px;
    }

    .row {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 5px;
    }

    .cell {
      width: 50px;
      height: 50px;
      border: 2px solid #ccc;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 1.5em;
      text-transform: uppercase;
      background: white;
    }

    #controls {
      margin-top: 20px;
    }

    #guessInput {
      font-size: 1em;
      padding: 6px;
      width: 120px;
      text-transform: uppercase;
    }

    #submitBtn, #restartBtn {
      font-size: 1em;
      padding: 6px 12px;
      margin-left: 5px;
      cursor: pointer;
    }

    #restartBtn {
      display: none;
    }
    
    #keyboard {
      margin-top: 20px;
    }

    .kb-row {
      display: flex;
      justify-content: center;
      margin: 4px 0;
    }

    .kb-row button {
      margin: 2px;
      padding: 8px 10px;
      font-size: 1em;
      text-transform: uppercase;
      cursor: pointer;
    }
    #deleteBtn {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 0;
      width: 40px;
      height: 40px;
    }
    
    #deleteBtn img {
      display: block;
      height: 15px;
    }


  </style>
</head>
<body>
  <h1>Wordle</h1>

  <div id="board">
    <!-- 6 rows of 5 boxes -->
    <script>
      for (let i = 0; i < 6; i++) {
        document.write('<div class="row">');
        for (let j = 0; j < 5; j++) {
          document.write('<div class="cell" id="cell-' + i + '-' + j + '"></div>');
        }
        document.write('</div>');
      }
    </script>
  </div>

  <div id="controls">
    <input type="text" id="guessInput" placeholder="Your guess">
    <button id="submitBtn">Guess</button>
    <button id="restartBtn">Restart</button>
  </div>

  <div id="keyboard">
    <div class="kb-row">
      <button>Q</button><button>W</button><button>E</button><button>R</button><button>T</button>
      <button>Y</button><button>U</button><button>I</button><button>O</button><button>P</button>
    </div>
    <div class="kb-row">
      <button>A</button><button>S</button><button>D</button><button>F</button><button>G</button>
      <button>H</button><button>J</button><button>K</button><button>L</button>
    </div>
    <div class="kb-row">
      <button>Enter</button>
      <button>Z</button><button>X</button><button>C</button><button>V</button><button>B</button><button>N</button><button>M</button>
      <button id="deleteBtn"><img src="backspace.png" alt="Delete" style="height:15px;"></button>
    </div>
  </div>


  <div id="message"></div>

  <script>
    // Randomly pick an answer
    const words = [
      "ARRAY", "LOGIC", "STACK", "QUEUE", "INPUT", "TOKEN", "CACHE", "BUGGY", "SPACE", "BYTES", 
      "INDEX", "CLASS", "FLOAT", "LOGIN", "LEARN", "FILES", "STUDY", "RECUR", "QUERY", "PROTO", 
      "BASIC", "VIRUS", "CLOUD", "ROBOT", "PIXEL", "ALERT", "DEBUG", "FRAME", "PATCH", "BRAIN"
    ];
    let answer = words[Math.floor(Math.random() * words.length)];
    console.log("Answer:", answer);

    // Restart button logic (change answer & clear board)
    document.getElementById("restartBtn").addEventListener("click", () => {
      answer = words[Math.floor(Math.random() * words.length)];
      console.log("Answer:", answer);
      document.getElementById("guessInput").value = "";
      document.getElementById("message").textContent = "";
      document.querySelectorAll(".cell").forEach(cell => { // clear board
        cell.textContent = "";
        cell.style.background = "white";
      });
      document.querySelectorAll("#keyboard button").forEach(btn => { // clear keyboard
        btn.style.background = "";
        btn.style.color = "";
      });
      document.getElementById("restartBtn").style.display = "none";
      document.getElementById("submitBtn").style.display = "inline-block";
    });

    // Make on-screen keyboard buttons type into the input
    document.querySelectorAll("#keyboard button").forEach(btn => {
      btn.addEventListener("click", () => {
        const input = document.getElementById("guessInput");
        const key = btn.textContent;
        if (key === "Enter") {
          document.getElementById("submitBtn").click();
          return;
        }
        if (btn.id == "deleteBtn") {
          input.value = input.value.slice(0, -1);
          return;
        }
        if (input.value.length < 5 && key.length === 1) {
          input.value += key;
        }
      });
    });
    // MAIN LOGIC HERE
    let currentRow = 0;
    document.getElementById('submitBtn').onclick = () => {
      // Length error
      const guess = document.getElementById('guessInput').value.trim().toUpperCase();
      if (guess.length !== 5) {
        alert("Word must be 5 letters!");
        return;
      }
      // Show your guess on board (with color)
      let numCorrectLetters = 0;
      for (let i = 0; i < 5; i++) {
        const cell = document.getElementById(`cell-${currentRow}-${i}`);
        cell.textContent = guess[i];
        const letter = guess[i];
        if (letter === answer[i]) {
          cell.style.background = "green";
          document.querySelectorAll("#keyboard button").forEach(btn => { if (btn.textContent === letter)  btn.style.background = "green"; });
          numCorrectLetters++;
        } else if (answer.includes(letter)) {
          cell.style.background = "yellow";
          document.querySelectorAll("#keyboard button").forEach(btn => { if (btn.textContent === letter)  btn.style.background = "yellow"; });

        } else {
          cell.style.background = "gray";
          document.querySelectorAll("#keyboard button").forEach(btn => { if (btn.textContent === letter)  btn.style.background = "gray"; });

        }
      }
      // Game over
      if (numCorrectLetters == 5) { // SUCCESS!
        currentRow = 0;
        document.getElementById("submitBtn").style.display = "none";
        document.getElementById("restartBtn").style.display = "inline-block";
        alert("✅✅✅  '" + answer + "'  ✅✅✅");
        return;
      }
      if (currentRow == 5) { // FAIL!
        currentRow = 0;
        document.getElementById("submitBtn").style.display = "none";
        document.getElementById("restartBtn").style.display = "inline-block";
        alert("❌❌❌  '" + answer + "'  ❌❌❌");
        return;
      }
      
      // Game NOT over
      currentRow++;
      document.getElementById('guessInput').value = "";
    };


  </script>
</body>
</html>
